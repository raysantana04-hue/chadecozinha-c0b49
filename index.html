<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ch√° de Cozinha da L√≠gia ü§ç</title>

<style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#f5f1ea; margin:0; text-align:center; color: #333; }
    header { background:black; color:white; padding:40px 20px; }
    h1 { margin:0; font-weight: 300; letter-spacing: 2px; }
    .subtitle { margin-top: 10px; opacity: 0.8; font-size: 0.9em; }
    
    .container { padding:20px; display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; max-width: 1200px; margin: 0 auto; }
    
    .item { 
        background:white; padding:20px; width:260px; 
        border-radius:12px; box-shadow:0 4px 6px rgba(0,0,0,0.05); 
        display: flex; flex-direction: column; justify-content: space-between;
        border: 1px solid #eee; transition: transform 0.2s;
    }
    .item:hover { transform: translateY(-5px); }
    
    h3 { margin: 0 0 10px 0; font-size: 1.1em; color: #000; min-height: 2.4em; display: flex; align-items: center; justify-content: center; }
    
    .link-sugestao { font-size: 12px; color: #0066ff; text-decoration: none; margin-bottom: 15px; display: inline-block; }
    .link-sugestao:hover { text-decoration: underline; }
    
    input { padding:10px; width:85%; border: 1px solid #ddd; border-radius: 6px; margin-bottom: 10px; outline: none; }
    input:focus { border-color: #000; }
    
    button { background:black; color:white; border:none; padding:12px; border-radius:6px; cursor:pointer; width: 100%; font-weight: bold; transition: 0.3s; }
    button:hover { background:#333; }
    
    .reservado-estilo { background:#e0e0e0 !important; color: #888 !important; cursor: not-allowed; }
</style>
</head>

<body>

<header>
    <h1>Ch√° de Cozinha da L√≠gia ü§ç</h1>
    <p class="subtitle">21 de Fevereiro de 2026</p>
    <p>Escolha um item da lista abaixo para presentear ‚ú®</p>
</header>

<div class="container" id="lista">Carregando lista de presentes...</div>

<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>

<script>
  // Suas configura√ß√µes extra√≠das do console
  const firebaseConfig = {
    apiKey: "AIzaSyCm9DgExRWhYNryZMMrO00Ya9g0lfNHilU",
    authDomain: "chadecozinha-c0b49-27555.firebaseapp.com",
    databaseURL: "https://chadecozinha-c0b49-27555-default-rtdb.firebaseio.com",
    projectId: "chadecozinha-c0b49-27555",
    storageBucket: "chadecozinha-c0b49-27555.firebasestorage.app",
    messagingSenderId: "210066909829",
    appId: "1:210066909829:web:bb6958ff15e1a18e3017ec",
    measurementId: "G-PXVHMW524J"
  };

  // Inicializa√ß√£o
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  // Fun√ß√£o para carregar os dados em tempo real da chave "presentes"
  function carregar() {
    database.ref('presentes').on('value', (snapshot) => {
      const presentes = snapshot.val();
      let html = "";

      if (!presentes) {
        document.getElementById("lista").innerHTML = "<p>Nenhum presente encontrado no banco.</p>";
        return;
      }

      // Itera sobre os 54 itens
      presentes.forEach((item, i) => {
        if (!item) return;

        const isReservado = item.reservado;
        const textoBtn = isReservado ? `Reservado por ${item.pessoa}` : "Escolher";
        const classeBtn = isReservado ? "reservado-estilo" : "";

        html += `
          <div class="item">
            <h3>${item.nome}</h3>
            <a href="${item.link}" target="_blank" class="link-sugestao">Ver sugest√£o de pre√ßo</a>
            
            ${!isReservado ? `
              <input id="nome${i}" placeholder="Seu nome">
              <button onclick="reservar(${i})">${textoBtn}</button>
            ` : `
              <button class="reservado-estilo" disabled>${textoBtn}</button>
            `}
          </div>
        `;
      });

      document.getElementById("lista").innerHTML = html;
    });
  }

  // Fun√ß√£o para salvar a reserva no banco de dados
  function reservar(i) {
    const nomeConvidado = document.getElementById("nome" + i).value;

    if (!nomeConvidado.trim()) {
      alert("Por favor, digite seu nome para reservar.");
      return;
    }

    // Atualiza o item espec√≠fico dentro da pasta "presentes"
    database.ref('presentes/' + i).update({
      reservado: true,
      pessoa: nomeConvidado
    })
    .then(() => {
      alert("Presente reservado! Muito obrigado! ‚ù§Ô∏è");
    })
    .catch((error) => {
      console.error("Erro:", error);
      alert("Erro ao salvar. Verifique se as Regras do Firebase est√£o como 'true'.");
    });
  }

  carregar();
</script>

</body>
</html>
