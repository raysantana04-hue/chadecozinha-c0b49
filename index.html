<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Ch√° de Cozinha da L√≠gia ü§ç</title>

<style>
    body { font-family: Arial; background:#f5f1ea; margin:0; text-align:center; }
    header { background:black; color:white; padding:30px; }
    h1 { margin:0; }
    .container { padding:20px; display: flex; flex-wrap: wrap; justify-content: center; }
    .item { 
        background:white; margin:10px; padding:15px; width:280px; 
        border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); 
        transition: transform 0.2s;
    }
    .item:hover { transform: scale(1.02); }
    .item img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px; }
    button { background:black; color:white; border:none; padding:10px; border-radius:5px; cursor:pointer; width: 100%; }
    button:hover { background:#444; }
    .reservado-estilo { background:#ccc !important; cursor: not-allowed; }
    input { padding:8px; margin-top:5px; width:90%; border: 1px solid #ddd; border-radius: 4px; }
    .link-sugestao { display: block; margin: 10px 0; font-size: 12px; color: #0066ff; text-decoration: none; }
</style>
</head>

<body>

<header>
    <h1>Ch√° de Cozinha da L√≠gia ü§ç</h1>
    <p>21 de Fevereiro de 2026</p>
    <p>Escolha seu presente com carinho ‚ú®</p>
</header>

<div class="container" id="lista">Carregando presentes...</div>

<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-database-compat.js"></script>

<script>
  // 1. COLE SUAS CONFIGURA√á√ïES DO FIREBASE AQUI:
  const firebaseConfig = {
    apiKey: "SUA_API_KEY",
    authDomain: "chadecozinha-c0b49.firebaseapp.com",
    databaseURL: "https://chadecozinha-c0b49-default-rtdb.firebaseio.com",
    projectId: "chadecozinha-c0b49",
    storageBucket: "chadecozinha-c0b49.appspot.com",
    messagingSenderId: "SEU_ID",
    appId: "SEU_APP_ID"
  };

  // Inicializa o Firebase
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  // 2. Fun√ß√£o para carregar os dados em tempo real
  function carregar() {
    database.ref('presentes').on('value', (snapshot) => {
      const presentes = snapshot.val();
      let html = "";

      if (!presentes) {
        document.getElementById("lista").innerHTML = "<p>Nenhum presente encontrado no banco.</p>";
        return;
      }

      // O Realtime trata o JSON importado como um array ou objeto
      presentes.forEach((item, i) => {
        const statusReservado = item.reservado;
        const textoBotao = statusReservado ? `Reservado por ${item.pessoa}` : "Escolher Presente";
        const classeReservado = statusReservado ? "reservado-estilo" : "";

        html += `
          <div class="item">
            <img src="${item.imagem}" alt="${item.nome}">
            <h3>${item.nome}</h3>
            <a href="${item.link}" target="_blank" class="link-sugestao">Ver sugest√£o no Mercado Livre</a>
            
            ${!statusReservado ? `
              <input id="nome${i}" placeholder="Seu nome">
              <br><br>
              <button onclick="reservar(${i})" id="btn${i}">
                ${textoBotao}
              </button>
            ` : `
              <button class="reservado-estilo" disabled>
                ${textoBotao}
              </button>
            `}
          </div>
        `;
      });

      document.getElementById("lista").innerHTML = html;
    });
  }

  // 3. Fun√ß√£o para salvar a reserva
  function reservar(i) {
    const nomeConvidado = document.getElementById("nome" + i).value;

    if (nomeConvidado === "") {
      alert("Por favor, digite seu nome para reservar.");
      return;
    }

    // Atualiza o item espec√≠fico no Firebase
    database.ref('presentes/' + i).update({
      reservado: true,
      pessoa: nomeConvidado
    })
    .then(() => {
      alert("Presente reservado com sucesso! ‚ù§Ô∏è");
    })
    .catch((error) => {
      console.error("Erro ao reservar:", error);
      alert("Erro ao salvar. Verifique as regras do banco.");
    });
  }

  carregar();
</script>

</body>
</html>
